---
title: <b> "Count ticks on price" </b>
author: "Igor Galankov"
date: '`r Sys.time()`'
output: html_document

--- 

```{r setup, cache = F, echo = F, message = F, warning = F, tidy = F, results='hide'} 
require(rFdk)
ttConnect()
if(!require("tibble")){
install.packages("tibble", repos = "http://cran.us.r-project.org", dependencies = TRUE) 
library(tibble)
}
if(!require("plotly")){
install.packages("plotly", repos = "http://cran.us.r-project.org", dependencies = TRUE) 
library(plotly)
}
if(!require("DT")){
install.packages("DT", repos = "http://cran.us.r-project.org", dependencies = TRUE) 
library(DT)
}

require(rFdk)
ttConnect()

symbol <- "EURUSD"
startTime <- as.POSIXct(0, origin=ISOdatetime(2016,06,01,12,00,00))    
endTime <- as.POSIXct(0, origin=ISOdatetime(2016,06,01,13,00,00))  
```

<br>

Symbol: `r symbol ` <br>
Period: from `r startTime ` to `r endTime ` <br>

Chart from Asks: <br>
```{r echo=F}

#get ticks  
table <- ttFeed.TickBestHistory(symbol, startTime, endTime)   

GetPrecision <- function (symbol)
    {
       ttConf.Symbol()[name==symbol, precision]
    }
coeff <- 10^GetPrecision(symbol)

#calculate count Asks  
countAsk <- table(table$ask*coeff)  
  
#calculate count Bids  
countBid <- table(table$bid*coeff)  

#chart by Asks  
barplot(countAsk, horiz=TRUE, xlab="Count ticks", ylab="Ticks value")  
   
#Chart by Bids   
#barplot(countBid, horiz=TRUE)  

```
<br>
Chart from Bids: <br>
```{r echo=F}
barplot(countBid, horiz=TRUE, xlab="Count ticks", ylab="Ticks value") 
```
